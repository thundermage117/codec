<!-- /*
 * Codec Explorer: An interactive codec laboratory.
 * Copyright (C) 2026 Abhinav Tanniru
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <https://www.gnu.org/licenses/>.
 */ -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WASM Codec Explorer</title>

    <!-- Prevent the browser from requesting a favicon, which would cause a 404 error -->
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">

    <!-- Google Fonts: Inter + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">

    <!-- Theme init: apply saved/system theme before first paint to prevent flash -->
    <script>
        (function () {
            const saved = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (!saved && prefersDark)) {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        })();
    </script>
</head>

<body>

    <!-- ===== VIEWER MODE (existing UI) ===== -->
    <div id="viewerMode">

        <header>
            <h1>WASM Codec Explorer</h1>
            <div class="header-badges">
                <div class="privacy-badge">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                    <span>Processed locally on your device</span>
                </div>
                <a href="https://github.com/thundermage117/codec" class="github-link" target="_blank"
                    rel="noopener noreferrer">
                    <img src="assets/GitHub_Invertocat_Black.svg" alt="GitHub Logo" width="16" height="16">
                    <span>View Source on GitHub</span>
                </a>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" style="display:none;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </div>
        </header>

        <div class="container">
            <div class="card">
                <div class="canvas-wrapper" id="viewer-container">
                    <div class="viewer-info">
                        üí° Tip: Click and drag on the image to move the slider.
                    </div>
                    <div class="comparison-viewer">
                        <canvas id="originalCanvas"></canvas>
                        <canvas id="processedCanvas"></canvas>
                    </div>

                    <div class="slider-container">
                        <span class="slider-label">Original</span>
                        <input type="range" id="comparisonSlider" class="comparison-slider-input" min="0" max="100"
                            value="50">
                        <span class="slider-label">Processed</span>
                    </div>
                </div>
            </div>

            <div class="card controls">
                <!-- Drop Zone / Onboarding -->
                <div class="drop-zone" id="dropZone">
                    <svg class="drop-zone-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <path d="M21 15l-5-5L5 21"></path>
                    </svg>
                    <div class="drop-zone-text">Drop an image here</div>
                    <div class="drop-zone-hint">or <span class="browse-link">browse to upload</span></div>
                    <input type="file" id="fileInput" accept="image/*" disabled>
                </div>

                <div class="control-group">
                    <label for="qualitySlider">
                        Quality <span id="qualityValue">50</span>
                    </label>
                    <div class="preset-group">
                        <button class="preset-btn" data-quality="10" disabled>
                            <span class="preset-label">Low</span>
                            <span class="preset-desc">Thumbnails</span>
                        </button>
                        <button class="preset-btn" data-quality="50" disabled>
                            <span class="preset-label">Medium</span>
                            <span class="preset-desc">Web / Social</span>
                        </button>
                        <button class="preset-btn" data-quality="90" disabled>
                            <span class="preset-label">High</span>
                            <span class="preset-desc">Print / Archive</span>
                        </button>
                    </div>
                    <input type="range" id="qualitySlider" min="1" max="100" value="50" disabled>
                </div>

                <div class="control-group">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px;">
                        <label class="group-label" style="margin-bottom: 0;">View Mode</label>
                        <div class="tint-toggle"
                            style="display: flex; align-items: center; gap: 4px; font-size: 0.8rem; color: var(--text-muted);">
                            <input type="checkbox" id="tint_toggle" checked style="margin: 0; cursor: pointer;">
                            <label for="tint_toggle"
                                style="margin-bottom: 0; cursor: pointer; font-weight: normal;">Cb/Cr
                                Tint</label>
                            <div class="tooltip-container">
                                <span class="info-icon">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="16" x2="12" y2="12"></line>
                                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                    </svg>
                                </span>
                                <div class="tooltip-content">
                                    <strong>Why remove the tint?</strong><br>
                                    The human eye is biologically wired to detect changes in brightness (Luminance) far
                                    better than changes in color (Chrominance). Viewing these channels in grayscale
                                    helps
                                    you see fine details and artifacts that get lost in the color tint. This same
                                    biological
                                    limitation is the foundation of image compression (like JPEG)‚Äîcodecs aggressively
                                    compress color data because our eyes rarely notice the difference.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="toggle-group">
                        <input type="radio" id="view_rgb" name="view_mode" value="rgb" checked>
                        <label for="view_rgb">RGB</label>

                        <input type="radio" id="view_artifacts" name="view_mode" value="artifacts">
                        <label for="view_artifacts">Error</label>

                        <input type="radio" id="view_y" name="view_mode" value="y">
                        <label for="view_y">Y</label>

                        <input type="radio" id="view_cr" name="view_mode" value="cr">
                        <label for="view_cr">Cr</label>

                        <input type="radio" id="view_cb" name="view_mode" value="cb">
                        <label for="view_cb">Cb</label>
                    </div>
                </div>

                <div class="control-group">
                    <label class="group-label">Tools</label>
                    <div class="toggle-group">
                        <input type="checkbox" id="inspect_mode" style="display:none;">
                        <label for="inspect_mode" id="inspect_label" class="tool-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            Inspect Block
                        </label>
                    </div>
                </div>

                <div class="control-group">
                    <label class="group-label">Chroma Subsampling</label>
                    <div class="toggle-group">
                        <input type="radio" id="cs_444" name="chroma_subsampling" value="444" checked>
                        <label for="cs_444">4:4:4</label>

                        <input type="radio" id="cs_422" name="chroma_subsampling" value="422">
                        <label for="cs_422">4:2:2</label>

                        <input type="radio" id="cs_420" name="chroma_subsampling" value="420">
                        <label for="cs_420">4:2:0</label>
                    </div>
                </div>

                <div class="stats">Status: <span id="status">Initializing...</span></div>

                <table class="metrics-table">
                    <thead>
                        <tr>
                            <th>Channel</th>
                            <th>PSNR (dB)</th>
                            <th>SSIM</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Y</td>
                            <td><span id="psnrY">-</span></td>
                            <td><span id="ssimY">-</span></td>
                        </tr>
                        <tr>
                            <td>Cr</td>
                            <td><span id="psnrCr">-</span></td>
                            <td><span id="ssimCr">-</span></td>
                        </tr>
                        <tr>
                            <td>Cb</td>
                            <td><span id="psnrCb">-</span></td>
                            <td><span id="ssimCb">-</span></td>
                        </tr>
                    </tbody>
                </table>

                <div class="file-size-bar-container" id="fileSizeContainer" style="display: none;">
                    <div class="file-size-header">
                        <span class="file-size-title">Estimated File Size</span>
                        <span class="file-size-values" id="fileSizeValues">‚Äî</span>
                    </div>
                    <div class="file-size-track">
                        <div class="file-size-fill" id="fileSizeFill" style="width: 100%;"></div>
                    </div>
                    <div class="file-size-labels">
                        <span class="file-size-label-left" id="fileSizeOrigLabel">Original: ‚Äî</span>
                        <span class="file-size-label-right" id="fileSizeReduction">‚Äî</span>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- /viewerMode -->

    <!-- ===== INSPECTOR MODE (full-page) ===== -->
    <div id="inspectorMode" style="display: none;">
        <div class="inspector-fullpage">

            <!-- Top Bar -->
            <div class="inspector-topbar">
                <button class="inspector-back-btn" id="inspectorBackBtn">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 5 5 12 12 19"></polyline>
                    </svg>
                    Back
                </button>
                <h2 class="inspector-topbar-title">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    Block Inspector
                </h2>
                <div class="inspector-topbar-badges">
                    <span class="inspector-badge badge-coords">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        <span id="blockCoords">‚Äî</span>
                    </span>
                    <span class="inspector-badge badge-qtable" id="qTableType">Luma</span>
                </div>
                <div class="inspector-topbar-legend">
                    <span class="legend-item"><span class="legend-dot dot-positive"></span>Positive</span>
                    <span class="legend-item"><span class="legend-dot dot-negative"></span>Negative</span>
                    <span class="legend-item"><span class="legend-dot dot-zero"></span>Near Zero</span>
                    <span class="legend-item"><span class="legend-dot dot-intensity"></span>Pixel Intensity</span>
                </div>
            </div>

            <!-- Two-column layout -->
            <div class="inspector-layout">

                <!-- Sidebar -->
                <aside class="inspector-sidebar">
                    <!-- Thumbnail Navigator -->
                    <details class="sidebar-section" open>
                        <summary class="sidebar-section-title"><span>Image Navigator</span></summary>
                        <div class="sidebar-section-body">
                            <div class="thumbnail-container" id="thumbnailContainer">
                                <canvas id="thumbnailCanvas"></canvas>
                            </div>
                        </div>
                    </details>

                    <!-- Suggested Blocks -->
                    <details class="sidebar-section" open>
                        <summary class="sidebar-section-title"><span>Suggested Blocks</span></summary>
                        <div class="sidebar-section-body">
                            <div class="suggested-blocks-list" id="suggestedBlocksList">
                                <div class="suggested-blocks-empty">Load an image to see suggestions</div>
                            </div>
                        </div>
                    </details>

                    <!-- Controls -->
                    <details class="sidebar-section sidebar-controls" open>
                        <summary class="sidebar-section-title"><span>Controls</span></summary>
                        <div class="sidebar-section-body">
                            <div class="control-group">
                                <label for="inspQualitySlider">
                                    Quality <span id="inspQualityValue">50</span>
                                </label>
                                <div class="preset-group">
                                    <button class="preset-btn insp-preset-btn" data-quality="10">
                                        <span class="preset-label">Low</span>
                                        <span class="preset-desc">Thumbnails</span>
                                    </button>
                                    <button class="preset-btn insp-preset-btn" data-quality="50">
                                        <span class="preset-label">Medium</span>
                                        <span class="preset-desc">Web / Social</span>
                                    </button>
                                    <button class="preset-btn insp-preset-btn" data-quality="90">
                                        <span class="preset-label">High</span>
                                        <span class="preset-desc">Print / Archive</span>
                                    </button>
                                </div>
                                <input type="range" id="inspQualitySlider" min="1" max="100" value="50">
                            </div>

                            <div class="control-group">
                                <label class="group-label">View Mode</label>
                                <div class="toggle-group">
                                    <input type="radio" id="insp_view_y" name="insp_view_mode" value="y" checked>
                                    <label for="insp_view_y">Y</label>
                                    <input type="radio" id="insp_view_cr" name="insp_view_mode" value="cr">
                                    <label for="insp_view_cr">Cr</label>
                                    <input type="radio" id="insp_view_cb" name="insp_view_mode" value="cb">
                                    <label for="insp_view_cb">Cb</label>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="group-label">Chroma Subsampling</label>
                                <div class="toggle-group">
                                    <input type="radio" id="insp_cs_444" name="insp_chroma_subsampling" value="444"
                                        checked>
                                    <label for="insp_cs_444">4:4:4</label>
                                    <input type="radio" id="insp_cs_422" name="insp_chroma_subsampling" value="422">
                                    <label for="insp_cs_422">4:2:2</label>
                                    <input type="radio" id="insp_cs_420" name="insp_chroma_subsampling" value="420">
                                    <label for="insp_cs_420">4:2:0</label>
                                </div>

                            </div>
                        </div>
                    </details>

                    <!-- Keyboard Shortcuts -->
                    <div class="sidebar-shortcuts">
                        <div class="shortcut-row"><kbd>‚Üê</kbd><kbd>‚Üí</kbd><kbd>‚Üë</kbd><kbd>‚Üì</kbd> Navigate blocks</div>
                        <div class="shortcut-row"><kbd>Esc</kbd> Exit inspector</div>
                        <div class="shortcut-row"><kbd>?</kbd> Show shortcuts</div>
                    </div>
                </aside>

                <!-- Main Content -->
                <main class="inspector-main">

                    <!-- Placeholder (before first block click) -->
                    <div id="inspectorPlaceholder" class="inspector-main-placeholder">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.3">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <p>Click a block on the thumbnail to inspect it</p>
                        <p class="placeholder-hint">Or select a suggested block from the sidebar</p>
                    </div>

                    <!-- Pipeline Content (hidden until block selected) -->
                    <div id="inspectorContent" style="display: none;">

                        <!-- Context Crop -->
                        <div class="context-crop-container">
                            <div class="context-crop-label">Block Context</div>
                            <div class="context-crop-canvas-wrap">
                                <canvas id="contextCropCanvas" width="64" height="64"></canvas>
                            </div>
                            <div class="context-crop-caption" id="contextCropCaption">Select a block to see its
                                surrounding context</div>
                        </div>

                        <!-- Inspector Pipeline Layout -->
                        <div class="inspector-pipeline">

                            <!-- === ROW 1: ENCODE PIPELINE === -->
                            <div class="pipeline-row-label">Encoding Pipeline</div>
                            <div class="pipeline-row">

                                <!-- 1. Original -->
                                <div class="pipeline-block">
                                    <div class="pipeline-block-header">
                                        <h3>Original</h3>
                                    </div>
                                    <div id="gridOriginal" class="block-grid"></div>
                                    <div class="block-label">AxB Pixels</div>
                                </div>

                                <!-- Arrow: DCT -->
                                <div class="pipeline-arrow">
                                    <div class="arrow-tooltip">
                                        <strong>Discrete Cosine Transform</strong>
                                        Converts pixel data into frequency coefficients.
                                    </div>
                                    <div class="arrow-line"></div>
                                    <div class="arrow-label">DCT</div>
                                    <div class="arrow-icon">‚Üí</div>
                                </div>

                                <!-- 2. DCT Coefficients -->
                                <div class="pipeline-block">
                                    <div class="pipeline-block-header">
                                        <h3>DCT Coefficients</h3>
                                    </div>
                                    <div id="gridDCT" class="block-grid"></div>
                                    <div class="block-label">Frequencies</div>
                                </div>

                                <!-- Arrow: Quantization -->
                                <div class="pipeline-arrow">
                                    <div class="arrow-tooltip">
                                        <strong>Quantization</strong>
                                        Divides frequencies by the quantization table to reduce data size.
                                    </div>
                                    <div class="arrow-line"></div>
                                    <div class="arrow-label">√∑ Quant</div>
                                    <div class="arrow-icon">‚Üí</div>
                                </div>

                                <!-- 3. Quantized -->
                                <div class="pipeline-block">
                                    <div class="pipeline-block-header">
                                        <h3>Quantized</h3>
                                    </div>
                                    <div id="gridQuantized" class="block-grid"></div>
                                    <div class="block-label">Integers</div>
                                </div>

                            </div>

                            <!-- === ROW 2: DECODE PIPELINE === -->
                            <div class="pipeline-row-label">Decoding Pipeline</div>
                            <div class="pipeline-row">

                                <!-- 1. Quantized (Repeated for clarity) -->
                                <div class="pipeline-block">
                                    <div class="pipeline-block-header">
                                        <h3>Quantized</h3>
                                    </div>
                                    <div id="gridQuantized2" class="block-grid"></div>
                                    <div class="block-label">Stored Data</div>
                                </div>

                                <!-- Arrow: Dequantization -->
                                <div class="pipeline-arrow">
                                    <div class="arrow-tooltip">
                                        <strong>Dequantization</strong>
                                        Multiplies stored integers by the quantization table.
                                    </div>
                                    <div class="arrow-line"></div>
                                    <div class="arrow-label">√ó Quant</div>
                                    <div class="arrow-icon">‚Üí</div>
                                </div>

                                <!-- 2. Dequantized -->
                                <div class="pipeline-block">
                                    <div class="pipeline-block-header">
                                        <h3>Dequantized</h3>
                                    </div>
                                    <div id="gridDequantized" class="block-grid"></div>
                                    <div class="block-label">Approx Freqs</div>
                                </div>

                                <!-- Arrow: IDCT -->
                                <div class="pipeline-arrow">
                                    <div class="arrow-tooltip">
                                        <strong>Inverse DCT</strong>
                                        Converts frequency coefficients back into pixel data.
                                    </div>
                                    <div class="arrow-line"></div>
                                    <div class="arrow-label">IDCT</div>
                                    <div class="arrow-icon">‚Üí</div>
                                </div>

                                <!-- 3. Reconstructed -->
                                <div class="pipeline-block">
                                    <div class="pipeline-block-header">
                                        <h3>Reconstructed</h3>
                                    </div>
                                    <div id="gridReconstructed" class="block-grid"></div>
                                    <div class="block-label">Final Image</div>
                                </div>

                            </div>

                            <!-- === ROW 3: ANALYSIS === -->
                            <div class="pipeline-row-label">Analysis & Statistics</div>
                            <div class="analysis-row">

                                <!-- Error Block -->
                                <div class="pipeline-block error-block">
                                    <div class="pipeline-block-header">
                                        <h3>Error Residual</h3>
                                    </div>
                                    <div class="error-visualizer">
                                        <div id="gridError" class="block-grid"></div>
                                        <div class="error-legend-vertical">
                                            <div class="legend-scale">
                                                <span>+30</span>
                                                <div class="scale-bar"></div>
                                                <span>-30</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Stats -->
                                <div class="analysis-card stats-card">
                                    <div class="analysis-header">
                                        <h3>Block Statistics</h3>
                                    </div>
                                    <div class="stats-grid">
                                        <div class="stat-box tooltip-container">
                                            <div class="stat-value" id="statMSE">‚Äî</div>
                                            <div class="stat-label">MSE</div>
                                            <div class="tooltip-content-small">
                                                <strong>Mean Squared Error</strong><br>
                                                <code>(1/64) &times; &Sigma;(orig &minus; recon)&sup2;</code><br>
                                                Average squared pixel error across all 64 coefficients of the 8&times;8 block.
                                            </div>
                                        </div>
                                        <div class="stat-box tooltip-container">
                                            <div class="stat-value" id="statPeakError">‚Äî</div>
                                            <div class="stat-label">Peak Error</div>
                                            <div class="tooltip-content-small">
                                                <strong>Peak Absolute Error</strong><br>
                                                <code>max |orig &minus; recon|</code><br>
                                                Worst-case pixel difference in the block; the largest single reconstruction error.
                                            </div>
                                        </div>
                                        <div class="stat-box tooltip-container">
                                            <div class="stat-value" id="statZeros">‚Äî</div>
                                            <div class="stat-label">Zeros (Count)</div>
                                            <div class="tooltip-content-small">
                                                <strong>Zero Coefficients</strong><br>
                                                <code>count(|quant[i]| &lt; 0.5)</code><br>
                                                Number of the 64 quantized DCT coefficients that were rounded to zero. More zeros means better run-length compression.
                                            </div>
                                        </div>
                                        <div class="stat-box tooltip-container">
                                            <div class="stat-value" id="statCompression">‚Äî</div>
                                            <div class="stat-label">Compression</div>
                                            <div class="tooltip-content-small">
                                                <strong>Zero Coefficient Ratio</strong><br>
                                                <code>(zeros / 64) &times; 100%</code><br>
                                                Percentage of quantized DCT coefficients equal to zero. Higher values indicate greater compressibility.
                                            </div>
                                        </div>
                                    </div>
                                    <div id="lossMeterContainer" class="mt-auto"></div>
                                </div>

                                <!-- Q-Table -->
                                <div class="pipeline-block qtable-block">
                                    <div class="pipeline-block-header">
                                        <h3>Quant Table</h3>
                                        <span class="inspector-badge badge-qtable" id="qTableType2">Luma</span>
                                    </div>
                                    <div id="gridQuantTable" class="block-grid"></div>
                                </div>

                            </div>

                        </div>

                        <!-- Floating Basis Popover -->
                        <div id="basisPopover" class="basis-popover" style="display: none;">
                            <div class="basis-popover-header">
                                <span class="basis-popover-title">
                                    <span id="basisCoord">(0,0)</span>
                                    <span class="basis-popover-freq" id="basisFreqLabel">DC</span>
                                </span>
                            </div>
                            <div class="basis-popover-body">
                                <div class="basis-popover-canvases">
                                    <div class="basis-popover-panel">
                                        <div class="basis-popover-panel-label">Basis</div>
                                        <canvas id="basisCanvas" width="80" height="80"></canvas>
                                    </div>
                                    <div class="basis-popover-panel">
                                        <div class="basis-popover-panel-label">Contribution</div>
                                        <canvas id="contributionCanvas" width="80" height="80"></canvas>
                                    </div>
                                </div>
                                <div class="basis-popover-stats">
                                    <span class="bps-item">DCT: <strong id="basisValue">&mdash;</strong></span>
                                    <span class="bps-item">Q: <strong id="basisQuantized">&mdash;</strong></span>
                                    <span class="bps-item">√∑ <strong id="basisDivisor">&mdash;</strong></span>
                                </div>
                            </div>
                        </div>

                    </div><!-- /inspectorContent -->
                </main>
            </div><!-- /inspector-layout -->
        </div><!-- /inspector-fullpage -->
    </div><!-- /inspectorMode -->

    <script src="codec.js"></script>
    <script type="module" src="js/main.js"></script>

</body>

</html>