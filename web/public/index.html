<!-- /*
 * Codec Explorer: An interactive codec laboratory.
 * Copyright (C) 2026 Abhinav Tanniru
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <https://www.gnu.org/licenses/>.
 */ -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WASM Codec Explorer</title>

    <!-- Prevent the browser from requesting a favicon, which would cause a 404 error -->
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <h1>WASM Codec Explorer</h1>
        <div class="privacy-badge">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <span>Processed locally on your device</span>
        </div>
        <a href="https://github.com/thundermage117/codec" class="github-link" target="_blank" rel="noopener noreferrer">
            <img src="assets/GitHub_Invertocat_Black.svg" alt="GitHub Logo" width="16" height="16">
            <span>View Source on GitHub</span>
        </a>
    </header>

    <div class="container">
        <div class="card">
            <div class="canvas-wrapper" id="viewer-container">
                <div class="viewer-info">
                    ðŸ’¡ Tip: Click and drag on the image to move the slider.
                </div>
                <div class="comparison-viewer">
                    <canvas id="originalCanvas"></canvas>
                    <canvas id="processedCanvas"></canvas>
                </div>

                <div class="slider-container">
                    <span class="slider-label">Original</span>
                    <input type="range" id="comparisonSlider" class="comparison-slider-input" min="0" max="100"
                        value="100">
                    <span class="slider-label">Processed</span>
                </div>
            </div>
        </div>

        <div class="card controls">
            <div class="control-group">
                <label for="fileInput">Upload Image</label>
                <input type="file" id="fileInput" accept="image/*" disabled>
            </div>

            <div class="control-group">
                <label for="qualitySlider">
                    Quality <span id="qualityValue">50</span>
                </label>
                <input type="range" id="qualitySlider" min="1" max="100" value="50" disabled>
            </div>

            <div class="control-group">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px;">
                    <label class="group-label" style="margin-bottom: 0;">View Mode</label>
                    <div class="tint-toggle"
                        style="display: flex; align-items: center; gap: 4px; font-size: 0.8rem; color: var(--text-muted);">
                        <input type="checkbox" id="tint_toggle" checked style="margin: 0; cursor: pointer;">
                        <label for="tint_toggle" style="margin-bottom: 0; cursor: pointer; font-weight: normal;">Cb/Cr
                            Tint</label>
                        <div class="tooltip-container">
                            <span class="info-icon">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="16" x2="12" y2="12"></line>
                                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                </svg>
                            </span>
                            <div class="tooltip-content">
                                <strong>Why remove the tint?</strong><br>
                                The human eye is biologically wired to detect changes in brightness (Luminance) far
                                better than changes in color (Chrominance). Viewing these channels in grayscale helps
                                you see fine details and artifacts that get lost in the color tint. This same biological
                                limitation is the foundation of image compression (like JPEG)â€”codecs aggressively
                                compress color data because our eyes rarely notice the difference.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="toggle-group">
                    <input type="radio" id="view_rgb" name="view_mode" value="rgb" checked>
                    <label for="view_rgb">RGB</label>

                    <input type="radio" id="view_artifacts" name="view_mode" value="artifacts">
                    <label for="view_artifacts">Error</label>

                    <input type="radio" id="view_y" name="view_mode" value="y">
                    <label for="view_y">Y</label>

                    <input type="radio" id="view_cr" name="view_mode" value="cr">
                    <label for="view_cr">Cr</label>

                    <input type="radio" id="view_cb" name="view_mode" value="cb">
                    <label for="view_cb">Cb</label>
                </div>
            </div>

            <div class="control-group">
                <label class="group-label">Chroma Subsampling</label>
                <div class="toggle-group">
                    <input type="radio" id="cs_444" name="chroma_subsampling" value="444" checked>
                    <label for="cs_444">4:4:4</label>

                    <input type="radio" id="cs_422" name="chroma_subsampling" value="422">
                    <label for="cs_422">4:2:2</label>

                    <input type="radio" id="cs_420" name="chroma_subsampling" value="420">
                    <label for="cs_420">4:2:0</label>
                </div>
            </div>

            <div class="stats">Status: <span id="status">Initializing...</span></div>
            <div class="stats">PSNR (Y): <span id="psnrY">-</span> dB</div>
            <div class="stats">PSNR (Cr): <span id="psnrCr">-</span> dB</div>
            <div class="stats">PSNR (Cb): <span id="psnrCb">-</span> dB</div>
        </div>
    </div>

    <script src="codec.js"></script>
    <script src="main.js"></script>

</body>

</html>